name: Test link deployment

on:
  workflow_dispatch:
    inputs:
      action:
        description: 'Action for Testing environment'
        required: true
        default: 'update'
        type: choice
        options:
          - update
          - create
          - destroy
    branches:
      - 'testlink/**'

jobs:
  prepare:
    runs-on: self-hosted
    if: ${{ github.event.inputs.action == 'update' }}
    steps:
      - name: Prepare ğŸš—
        run: |
            echo "Actions is ${{ github.event.inputs.action }}"
  build_frontned:
    runs-on: self-hosted
    if: ${{ github.event.inputs.action == 'update' }}
    needs: [prepare]
    steps:
      - name: Build FrontEnd ğŸš—
        run: |
            echo "Actions is ${{ github.event.inputs.action }}"
  build_containers:
    runs-on: self-hosted
    if: ${{ github.event.inputs.action == 'update' }}
    needs: [prepare]
    steps:
      - name: Build Containers ğŸš—
        run: |
            echo "Actions is ${{ github.event.inputs.action }}"
  deploy:
    runs-on: self-hosted
    if: ${{ github.event.inputs.action == 'update' }}
    needs: [build_frontned, build_containers]
    steps:
      - name: Deploy ğŸš—
        run: |
            echo "Actions is ${{ github.event.inputs.action }}"
  create:
    runs-on: self-hosted
    if: ${{ github.event.inputs.action == 'create' }}
    steps:
      - name: Create ğŸš—
        run: |
            echo "Actions is ${{ github.event.inputs.action }}"
  destroy:
    runs-on: self-hosted
    if: ${{ github.event.inputs.action == 'destroy' }}
    steps:
      - name: Destroy ğŸš—
        run: |
            echo "Actions is ${{ github.event.inputs.action }}"